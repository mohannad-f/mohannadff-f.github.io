<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>آيات المشاعر - BASIRA IMAN</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- تذكير الصلاة على النبي -->
    <div class="prayer-reminder">
        <div class="prayer-ar">صل على النبي محمد 💚</div>
        <div class="prayer-en">Peace and blessings be upon our Prophet Muhammad 💚 </div>
    </div>

    <!-- المحتوى الرئيسي -->
    <div class="container">
        <!-- رأس الصفحة -->
        <header class="page-header">
            <a href="index.html" class="back-btn" id="backBtn">
                <i class="fas fa-arrow-right"></i>
                <span id="backText">العودة للرئيسية</span>
            </a>
            <div class="page-title">
                <h1 class="title-ar" id="pageTitle">آيات المشاعر</h1>
                <p class="title-en" id="pageSubtitle">Verses of Emotions</p>
            </div>
        </header>

        <!-- شبكة المشاعر (المستوى الأول) -->
        <div class="feelings-grid" id="feelingsGrid">
            <!-- سيتم ملؤها بواسطة JavaScript -->
        </div>

        <!-- قائمة الآيات (المستوى الثاني) -->
        <div class="verses-list" id="versesList" style="display: none;">
            <!-- سيتم ملؤها بواسطة JavaScript -->
        </div>

        <!-- محتوى الآية (المستوى الثالث) -->
        <main class="verse-content" id="verseContent" style="display: none;">
            <!-- نص الآية -->
            <section class="verse-section">
                <div class="verse-header">
                    <h2>نص الآية الكريمة</h2>
                    <div class="verse-actions">
                        <button onclick="copyVerse()" class="action-btn">
                            <i class="fas fa-copy"></i>
                            نسخ
                        </button>
                        <button onclick="shareVerse()" class="action-btn">
                            <i class="fas fa-share"></i>
                            مشاركة
                        </button>
                    </div>
                </div>
                <div class="verse-text-container">
                    <p class="verse-text" id="verseText"></p>
                </div>
            </section>

            <!-- التفسير -->
            <section class="interpretation-section">
                <div class="section-header">
                    <h2>التفسير والشرح</h2>
                    <div class="section-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                </div>
                <div class="interpretation-content" id="tafsirContent">
                </div>
            </section>

            <!-- الترجمة الإنجليزية -->
            <section class="english-section">
                <div class="section-header">
                    <h2>English Translation & Commentary</h2>
                    <div class="section-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                </div>
                <div class="english-content" id="englishContent">
                </div>
            </section>
        </main>
    </div>

    <script src="verses_data.json"></script>
    <script>
        // تحميل البيانات
        let versesData = null;
        let currentEmotion = null;
        let currentVerseIndex = null;

        // تحميل البيانات من الملف
        fetch('verses_data.json')
            .then(response => response.json())
            .then(data => {
                versesData = data;
                showFeelings();
            })
            .catch(error => {
                console.error('خطأ في تحميل البيانات:', error);
            });

        // عرض المشاعر (المستوى الأول)
        function showFeelings() {
            const feelingsGrid = document.getElementById('feelingsGrid');
            const versesList = document.getElementById('versesList');
            const verseContent = document.getElementById('verseContent');
            
            feelingsGrid.style.display = 'grid';
            versesList.style.display = 'none';
            verseContent.style.display = 'none';
            
            document.getElementById('pageTitle').textContent = 'آيات المشاعر';
            document.getElementById('pageSubtitle').textContent = 'Verses of Emotions';
            document.getElementById('backBtn').href = 'index.html';
            document.getElementById('backText').textContent = 'العودة للرئيسية';
            
       const emotions = [
    { key: 'happy', icon: '<i class="fas fa-smile"></i>' },
    { key: 'angry', icon: '<i class="fas fa-angry"></i>' },
    { key: 'sad', icon: '<i class="fas fa-sad-tear"></i>' },
    { key: 'alone', icon: '<i class="fas fa-moon"></i>' },
    { key: 'penitent', icon: '<i class="fas fa-heart-broken"></i>' },
    { key: 'afraid', icon: '<i class="fas fa-exclamation-triangle"></i>' },
    { key: 'lost', icon: '<i class="fas fa-question-circle"></i>' },
    { key:'message', icon: '<i class="fas fa-envelope-open-text"></i>' }
];            
            
            
            feelingsGrid.innerHTML = emotions.map(emotion => {
                const data = versesData[emotion.key];
                return `
                    <a href="#" onclick="showVersesList('${emotion.key}'); return false;" class="feeling-card">
                        <div class="feeling-title"><latex${emotion.icon} $</latex>{data.name_ar}</div>
                        <div class="feeling-title-en">${data.name_en}</div>
                        <div class="verses-count">${data.count} آية</div>
                    </a>
                `;
            }).join('');
        }

        // عرض قائمة الآيات (المستوى الثاني)
        function showVersesList(emotionKey) {
            currentEmotion = emotionKey;
            const data = versesData[emotionKey];
            
            const feelingsGrid = document.getElementById('feelingsGrid');
            const versesList = document.getElementById('versesList');
            const verseContent = document.getElementById('verseContent');
            
            feelingsGrid.style.display = 'none';
            versesList.style.display = 'grid';
            verseContent.style.display = 'none';
            
            document.getElementById('pageTitle').textContent = 'آيات ' + data.name_ar;
            document.getElementById('pageSubtitle').textContent = 'Verses of ' + data.name_en;
            document.getElementById('backBtn').href = '#';
            document.getElementById('backBtn').onclick = function() { showFeelings(); return false; };
            document.getElementById('backText').textContent = 'العودة لآيات المشاعر';
            
            versesList.innerHTML = data.verses.map((verse, index) => {
                const preview = verse.text.substring(0, 100) + (verse.text.length > 100 ? '...' : '');
                return `
                    <a href="#" onclick="showVerse('${emotionKey}', ${index}); return false;" class="verse-item">
                        <div class="verse-item-title">${escapeHtml(verse.name)}</div>
                        <div class="verse-item-preview">${escapeHtml(preview)}</div>
                    </a>
                `;
            }).join('');
            
            window.scrollTo(0, 0);
        }

        // عرض الآية الكاملة (المستوى الثالث)
        function showVerse(emotionKey, verseIndex) {
            currentEmotion = emotionKey;
            currentVerseIndex = verseIndex;
            
            const data = versesData[emotionKey];
            const verse = data.verses[verseIndex];
            
            const feelingsGrid = document.getElementById('feelingsGrid');
            const versesList = document.getElementById('versesList');
            const verseContent = document.getElementById('verseContent');
            
            feelingsGrid.style.display = 'none';
            versesList.style.display = 'none';
            verseContent.style.display = 'block';
            
            document.getElementById('pageTitle').textContent = verse.name;
            document.getElementById('pageSubtitle').textContent = data.name_en + ' Verse';
            document.getElementById('backBtn').href = '#';
            document.getElementById('backBtn').onclick = function() { showVersesList(emotionKey); return false; };
            document.getElementById('backText').textContent = 'العودة لقائمة ' + data.name_ar;
            
            // نص الآية
            document.getElementById('verseText').textContent = verse.text;
            
            // التفسير
            const tafsirParagraphs = verse.tafsir_ar.split('\n\n').filter(p => p.trim());
            document.getElementById('tafsirContent').innerHTML = tafsirParagraphs.map(p => 
                `<p>${escapeHtml(p.trim())}</p>`
            ).join('');
            
            // الترجمة الإنجليزية
            const englishParts = verse.english.split('\n\n').filter(p => p.trim());
            document.getElementById('englishContent').innerHTML = englishParts.map(part => {
                part = part.trim();
                if (part.startsWith('Allah says:') || part.includes('﴿') || part.includes('[')) {
                    return `<p class="english-verse">${escapeHtml(part)}</p>`;
                } else {
                    return `<p>${escapeHtml(part)}</p>`;
                }
            }).join('');
            
            window.scrollTo(0, 0);
        }

        // تنظيف HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // نسخ الآية
        function copyVerse() {
            const verseText = document.getElementById('verseText').textContent;
            navigator.clipboard.writeText(verseText).then(() => {
                showNotification('تم نسخ الآية بنجاح!');
            });
        }

        // مشاركة الآية
        function shareVerse() {
            const verseText = document.getElementById('verseText').textContent;
            const verse = versesData[currentEmotion].verses[currentVerseIndex];
            const shareData = {
                title: 'آية من القرآن الكريم - ' + verse.name,
                text: verseText,
                url: window.location.href
            };

            if (navigator.share) {
                navigator.share(shareData);
            } else {
                copyVerse();
                showNotification('تم نسخ الآية للمشاركة!');
            }
        }

        // إظهار الإشعارات
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>

