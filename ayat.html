<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø§Ø¹Ø± - BASIRA IMAN</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- ØªØ°ÙƒÙŠØ± Ø§Ù„ØµÙ„Ø§Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ -->
    <div class="prayer-reminder">
        <div class="prayer-ar">ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯ ğŸ’š</div>
        <div class="prayer-en">Peace and blessings be upon our Prophet Muhammad ğŸ’š </div>
    </div>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <div class="container">
        <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
        <header class="page-header">
            <a href="index.html" class="back-btn" id="backBtn">
                <i class="fas fa-arrow-right"></i>
                <span id="backText">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </a>
            <div class="page-title">
                <h1 class="title-ar" id="pageTitle">Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø§Ø¹Ø±</h1>
                <p class="title-en" id="pageSubtitle">Verses of Emotions</p>
            </div>
        </header>

        <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ù…Ø´Ø§Ø¹Ø± (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„) -->
        <div class="feelings-grid" id="feelingsGrid">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
        </div>

        <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¢ÙŠØ§Øª (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ) -->
        <div class="verses-list" id="versesList" style="display: none;">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¢ÙŠØ© (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø«) -->
        <main class="verse-content" id="verseContent" style="display: none;">
            <!-- Ù†Øµ Ø§Ù„Ø¢ÙŠØ© -->
            <section class="verse-section">
                <div class="verse-header">
                    <h2>Ù†Øµ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ÙƒØ±ÙŠÙ…Ø©</h2>
                    <div class="verse-actions">
                        <button onclick="copyVerse()" class="action-btn">
                            <i class="fas fa-copy"></i>
                            Ù†Ø³Ø®
                        </button>
                        <button onclick="shareVerse()" class="action-btn">
                            <i class="fas fa-share"></i>
                            Ù…Ø´Ø§Ø±ÙƒØ©
                        </button>
                    </div>
                </div>
                <div class="verse-text-container">
                    <p class="verse-text" id="verseText"></p>
                </div>
            </section>

            <!-- Ø§Ù„ØªÙØ³ÙŠØ± -->
            <section class="interpretation-section">
                <div class="section-header">
                    <h2>Ø§Ù„ØªÙØ³ÙŠØ± ÙˆØ§Ù„Ø´Ø±Ø­</h2>
                    <div class="section-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                </div>
                <div class="interpretation-content" id="tafsirContent">
                </div>
            </section>

            <!-- Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© -->
            <section class="english-section">
                <div class="section-header">
                    <h2>English Translation & Commentary</h2>
                    <div class="section-icon">
                        <i class="fas fa-globe"></i>
                    </div>
                </div>
                <div class="english-content" id="englishContent">
                </div>
            </section>
        </main>
    </div>

    <script src="verses_data.json"></script>
    <script>
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        let versesData = null;
        let currentEmotion = null;
        let currentVerseIndex = null;

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù
        fetch('verses_data.json')
            .then(response => response.json())
            .then(data => {
                versesData = data;
                showFeelings();
            })
            .catch(error => {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
            });

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§Ø¹Ø± (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„)
        function showFeelings() {
            const feelingsGrid = document.getElementById('feelingsGrid');
            const versesList = document.getElementById('versesList');
            const verseContent = document.getElementById('verseContent');
            
            feelingsGrid.style.display = 'grid';
            versesList.style.display = 'none';
            verseContent.style.display = 'none';
            
            document.getElementById('pageTitle').textContent = 'Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø§Ø¹Ø±';
            document.getElementById('pageSubtitle').textContent = 'Verses of Emotions';
            document.getElementById('backBtn').href = 'index.html';
            document.getElementById('backText').textContent = 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©';
            
       const emotions = [
    { key: 'happy', icon: '<i class="fas fa-smile"></i>' },
    { key: 'angry', icon: '<i class="fas fa-angry"></i>' },
    { key: 'sad', icon: '<i class="fas fa-sad-tear"></i>' },
    { key: 'alone', icon: '<i class="fas fa-moon"></i>' },
    { key: 'penitent', icon: '<i class="fas fa-heart-broken"></i>' },
    { key: 'afraid', icon: '<i class="fas fa-exclamation-triangle"></i>' },
    { key: 'lost', icon: '<i class="fas fa-question-circle"></i>' },
    { key:'message', icon: '<i class="fas fa-envelope-open-text"></i>' }
];            
            
            
            feelingsGrid.innerHTML = emotions.map(emotion => {
                const data = versesData[emotion.key];
                return `
                    <a href="#" onclick="showVersesList('${emotion.key}'); return false;" class="feeling-card">
                        <div class="feeling-title"><latex${emotion.icon} $</latex>{data.name_ar}</div>
                        <div class="feeling-title-en">${data.name_en}</div>
                        <div class="verses-count">${data.count} Ø¢ÙŠØ©</div>
                    </a>
                `;
            }).join('');
        }

        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¢ÙŠØ§Øª (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ)
        function showVersesList(emotionKey) {
            currentEmotion = emotionKey;
            const data = versesData[emotionKey];
            
            const feelingsGrid = document.getElementById('feelingsGrid');
            const versesList = document.getElementById('versesList');
            const verseContent = document.getElementById('verseContent');
            
            feelingsGrid.style.display = 'none';
            versesList.style.display = 'grid';
            verseContent.style.display = 'none';
            
            document.getElementById('pageTitle').textContent = 'Ø¢ÙŠØ§Øª ' + data.name_ar;
            document.getElementById('pageSubtitle').textContent = 'Verses of ' + data.name_en;
            document.getElementById('backBtn').href = '#';
            document.getElementById('backBtn').onclick = function() { showFeelings(); return false; };
            document.getElementById('backText').textContent = 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø¢ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø§Ø¹Ø±';
            
            versesList.innerHTML = data.verses.map((verse, index) => {
                const preview = verse.text.substring(0, 100) + (verse.text.length > 100 ? '...' : '');
                return `
                    <a href="#" onclick="showVerse('${emotionKey}', ${index}); return false;" class="verse-item">
                        <div class="verse-item-title">${escapeHtml(verse.name)}</div>
                        <div class="verse-item-preview">${escapeHtml(preview)}</div>
                    </a>
                `;
            }).join('');
            
            window.scrollTo(0, 0);
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¢ÙŠØ© Ø§Ù„ÙƒØ§Ù…Ù„Ø© (Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø«)
        function showVerse(emotionKey, verseIndex) {
            currentEmotion = emotionKey;
            currentVerseIndex = verseIndex;
            
            const data = versesData[emotionKey];
            const verse = data.verses[verseIndex];
            
            const feelingsGrid = document.getElementById('feelingsGrid');
            const versesList = document.getElementById('versesList');
            const verseContent = document.getElementById('verseContent');
            
            feelingsGrid.style.display = 'none';
            versesList.style.display = 'none';
            verseContent.style.display = 'block';
            
            document.getElementById('pageTitle').textContent = verse.name;
            document.getElementById('pageSubtitle').textContent = data.name_en + ' Verse';
            document.getElementById('backBtn').href = '#';
            document.getElementById('backBtn').onclick = function() { showVersesList(emotionKey); return false; };
            document.getElementById('backText').textContent = 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù‚Ø§Ø¦Ù…Ø© ' + data.name_ar;
            
            // Ù†Øµ Ø§Ù„Ø¢ÙŠØ©
            document.getElementById('verseText').textContent = verse.text;
            
            // Ø§Ù„ØªÙØ³ÙŠØ±
            const tafsirParagraphs = verse.tafsir_ar.split('\n\n').filter(p => p.trim());
            document.getElementById('tafsirContent').innerHTML = tafsirParagraphs.map(p => 
                `<p>${escapeHtml(p.trim())}</p>`
            ).join('');
            
            // Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
            const englishParts = verse.english.split('\n\n').filter(p => p.trim());
            document.getElementById('englishContent').innerHTML = englishParts.map(part => {
                part = part.trim();
                if (part.startsWith('Allah says:') || part.includes('ï´¿') || part.includes('[')) {
                    return `<p class="english-verse">${escapeHtml(part)}</p>`;
                } else {
                    return `<p>${escapeHtml(part)}</p>`;
                }
            }).join('');
            
            window.scrollTo(0, 0);
        }

        // ØªÙ†Ø¸ÙŠÙ HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ©
        function copyVerse() {
            const verseText = document.getElementById('verseText').textContent;
            navigator.clipboard.writeText(verseText).then(() => {
                showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
            });
        }

        // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¢ÙŠØ©
        function shareVerse() {
            const verseText = document.getElementById('verseText').textContent;
            const verse = versesData[currentEmotion].verses[currentVerseIndex];
            const shareData = {
                title: 'Ø¢ÙŠØ© Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - ' + verse.name,
                text: verseText,
                url: window.location.href
            };

            if (navigator.share) {
                navigator.share(shareData);
            } else {
                copyVerse();
                showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¢ÙŠØ© Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©!');
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>

